import Network from "./Network";
import { generateUUID } from '../utils/utils';

export default class Landing extends Network {
    constructor(callback) {
        window.id = localStorage.getItem('user_id') || window.id
        if (!window.id) {
            window.id = generateUUID();
            localStorage.setItem('user_id', window.id)
        }
        const { search } = window.location;
        const params = new URLSearchParams(search);
        const ttclid = params.get('ttclid');
        const onelink = params.get('onelink');
        
        if (ttclid) {
            localStorage.setItem('ttclid', ttclid)
        }
        if (onelink) {
            localStorage.setItem('onelink', onelink)
        }
        super(callback)
    }

    async openStore() {
        if (window.ttq) {
            window.ttq.track('ClickButton')
        }

        const url = window.generateUrl;
        if (url) {
            window.open(url, '_top', 'noopener,noreferrer');
        } else {
            window.open(window.location.href, '_top', 'noopener,noreferrer');
        }
    }
}